{% extends "splunkdj:base_with_account_bar.html" %}

{% load splunkmvc %}

{% block title %}{{app_name}} Home Page{% endblock title %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}{{app_name}}/custom.css" />

    <style>        
        #hsi-graph {
            width: auto;
            height: 700px;
            background-color: white;
            border: 1px solid gray;
        }

        h3 {
            margin-bottom: 10px;
        }

    </style>
{% endblock css %}

{% block content %}

    <div class="container">
        <h3>Events from Host to Sourcetype to Index (past 5 minutes)</h3>
        <div id="hsi-graph">
        </div>
    </div>

{% endblock content%}

{% block managers %}
    {% searchmanager
        id="hsi_search"
        search="index=* | head 200 | dedup host sourcetype index | table host sourcetype index"
        earliest_time="-5m@m"
        latest_time="now"
        preview=True
        cache=True %}
{% endblock managers %}

{% block js %}    
    <script>
        require([
            "splunkjs/ready!",
            "jquery",
            "splunk_wftoolkit/components/parallelcoords/parallelcoords",
        ],
        function(mvc, $, ParallelCoords) {
            var coords = new ParallelCoords({
                'id' : 'hsi',
                'managerid' : 'hsi_search',
                'el' : $('#hsi-graph')
            }).render();
        });
    </script>
{% endblock js %}